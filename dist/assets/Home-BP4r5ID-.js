import{a as Y,r as T,j as n,u as K,b as U,L as R,i as W}from"./index-B41o97T_.js";import{m as D,c as Z,e as ee,s as G,a as ae,b as Q,g as H,S as te,d as se,f as ie,P as V}from"./Products-DWTz_rVA.js";import{w as ne,P as le}from"./ProductCard-BeBWYU3Q.js";function F(d){return d===void 0&&(d=""),`.${d.trim().replace(/([\.:!+\/()[\]])/g,"\\$1").replace(/ /g,".")}`}function re(d){let{swiper:e,extendParams:g,on:l,emit:r}=d;const i="swiper-pagination";g({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:a=>a,formatFractionTotal:a=>a,bulletClass:`${i}-bullet`,bulletActiveClass:`${i}-bullet-active`,modifierClass:`${i}-`,currentClass:`${i}-current`,totalClass:`${i}-total`,hiddenClass:`${i}-hidden`,progressbarFillClass:`${i}-progressbar-fill`,progressbarOppositeClass:`${i}-progressbar-opposite`,clickableClass:`${i}-clickable`,lockClass:`${i}-lock`,horizontalClass:`${i}-horizontal`,verticalClass:`${i}-vertical`,paginationDisabledClass:`${i}-disabled`}}),e.pagination={el:null,bullets:[]};let u,y=0;function B(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function x(a,t){const{bulletActiveClass:s}=e.params.pagination;a&&(a=a[`${t==="prev"?"previous":"next"}ElementSibling`],a&&(a.classList.add(`${s}-${t}`),a=a[`${t==="prev"?"previous":"next"}ElementSibling`],a&&a.classList.add(`${s}-${t}-${t}`)))}function L(a,t,s){if(a=a%s,t=t%s,t===a+1)return"next";if(t===a-1)return"previous"}function A(a){const t=a.target.closest(F(e.params.pagination.bulletClass));if(!t)return;a.preventDefault();const s=Q(t)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===s)return;const o=L(e.realIndex,s,e.slides.length);o==="next"?e.slideNext():o==="previous"?e.slidePrev():e.slideToLoop(s)}else e.slideTo(s)}function S(){const a=e.rtl,t=e.params.pagination;if(B())return;let s=e.pagination.el;s=D(s);let o,m;const j=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,k=e.params.loop?Math.ceil(j/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(m=e.previousRealIndex||0,o=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(o=e.snapIndex,m=e.previousSnapIndex):(m=e.previousIndex||0,o=e.activeIndex||0),t.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const c=e.pagination.bullets;let h,b,P;if(t.dynamicBullets&&(u=ae(c[0],e.isHorizontal()?"width":"height"),s.forEach(f=>{f.style[e.isHorizontal()?"width":"height"]=`${u*(t.dynamicMainBullets+4)}px`}),t.dynamicMainBullets>1&&m!==void 0&&(y+=o-(m||0),y>t.dynamicMainBullets-1?y=t.dynamicMainBullets-1:y<0&&(y=0)),h=Math.max(o-y,0),b=h+(Math.min(c.length,t.dynamicMainBullets)-1),P=(b+h)/2),c.forEach(f=>{const v=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(C=>`${t.bulletActiveClass}${C}`)].map(C=>typeof C=="string"&&C.includes(" ")?C.split(" "):C).flat();f.classList.remove(...v)}),s.length>1)c.forEach(f=>{const v=Q(f);v===o?f.classList.add(...t.bulletActiveClass.split(" ")):e.isElement&&f.setAttribute("part","bullet"),t.dynamicBullets&&(v>=h&&v<=b&&f.classList.add(...`${t.bulletActiveClass}-main`.split(" ")),v===h&&x(f,"prev"),v===b&&x(f,"next"))});else{const f=c[o];if(f&&f.classList.add(...t.bulletActiveClass.split(" ")),e.isElement&&c.forEach((v,C)=>{v.setAttribute("part",C===o?"bullet-active":"bullet")}),t.dynamicBullets){const v=c[h],C=c[b];for(let _=h;_<=b;_+=1)c[_]&&c[_].classList.add(...`${t.bulletActiveClass}-main`.split(" "));x(v,"prev"),x(C,"next")}}if(t.dynamicBullets){const f=Math.min(c.length,t.dynamicMainBullets+4),v=(u*f-u)/2-P*u,C=a?"right":"left";c.forEach(_=>{_.style[e.isHorizontal()?C:"top"]=`${v}px`})}}s.forEach((c,h)=>{if(t.type==="fraction"&&(c.querySelectorAll(F(t.currentClass)).forEach(b=>{b.textContent=t.formatFractionCurrent(o+1)}),c.querySelectorAll(F(t.totalClass)).forEach(b=>{b.textContent=t.formatFractionTotal(k)})),t.type==="progressbar"){let b;t.progressbarOpposite?b=e.isHorizontal()?"vertical":"horizontal":b=e.isHorizontal()?"horizontal":"vertical";const P=(o+1)/k;let f=1,v=1;b==="horizontal"?f=P:v=P,c.querySelectorAll(F(t.progressbarFillClass)).forEach(C=>{C.style.transform=`translate3d(0,0,0) scaleX(${f}) scaleY(${v})`,C.style.transitionDuration=`${e.params.speed}ms`})}t.type==="custom"&&t.renderCustom?(G(c,t.renderCustom(e,o+1,k)),h===0&&r("paginationRender",c)):(h===0&&r("paginationRender",c),r("paginationUpdate",c)),e.params.watchOverflow&&e.enabled&&c.classList[e.isLocked?"add":"remove"](t.lockClass)})}function N(){const a=e.params.pagination;if(B())return;const t=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let s=e.pagination.el;s=D(s);let o="";if(a.type==="bullets"){let m=e.params.loop?Math.ceil(t/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&m>t&&(m=t);for(let j=0;j<m;j+=1)a.renderBullet?o+=a.renderBullet.call(e,j,a.bulletClass):o+=`<${a.bulletElement} ${e.isElement?'part="bullet"':""} class="${a.bulletClass}"></${a.bulletElement}>`}a.type==="fraction"&&(a.renderFraction?o=a.renderFraction.call(e,a.currentClass,a.totalClass):o=`<span class="${a.currentClass}"></span> / <span class="${a.totalClass}"></span>`),a.type==="progressbar"&&(a.renderProgressbar?o=a.renderProgressbar.call(e,a.progressbarFillClass):o=`<span class="${a.progressbarFillClass}"></span>`),e.pagination.bullets=[],s.forEach(m=>{a.type!=="custom"&&G(m,o||""),a.type==="bullets"&&e.pagination.bullets.push(...m.querySelectorAll(F(a.bulletClass)))}),a.type!=="custom"&&r("paginationRender",s[0])}function $(){e.params.pagination=Z(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const a=e.params.pagination;if(!a.el)return;let t;typeof a.el=="string"&&e.isElement&&(t=e.el.querySelector(a.el)),!t&&typeof a.el=="string"&&(t=[...document.querySelectorAll(a.el)]),t||(t=a.el),!(!t||t.length===0)&&(e.params.uniqueNavElements&&typeof a.el=="string"&&Array.isArray(t)&&t.length>1&&(t=[...e.el.querySelectorAll(a.el)],t.length>1&&(t=t.find(s=>ee(s,".swiper")[0]===e.el))),Array.isArray(t)&&t.length===1&&(t=t[0]),Object.assign(e.pagination,{el:t}),t=D(t),t.forEach(s=>{a.type==="bullets"&&a.clickable&&s.classList.add(...(a.clickableClass||"").split(" ")),s.classList.add(a.modifierClass+a.type),s.classList.add(e.isHorizontal()?a.horizontalClass:a.verticalClass),a.type==="bullets"&&a.dynamicBullets&&(s.classList.add(`${a.modifierClass}${a.type}-dynamic`),y=0,a.dynamicMainBullets<1&&(a.dynamicMainBullets=1)),a.type==="progressbar"&&a.progressbarOpposite&&s.classList.add(a.progressbarOppositeClass),a.clickable&&s.addEventListener("click",A),e.enabled||s.classList.add(a.lockClass)}))}function I(){const a=e.params.pagination;if(B())return;let t=e.pagination.el;t&&(t=D(t),t.forEach(s=>{s.classList.remove(a.hiddenClass),s.classList.remove(a.modifierClass+a.type),s.classList.remove(e.isHorizontal()?a.horizontalClass:a.verticalClass),a.clickable&&(s.classList.remove(...(a.clickableClass||"").split(" ")),s.removeEventListener("click",A))})),e.pagination.bullets&&e.pagination.bullets.forEach(s=>s.classList.remove(...a.bulletActiveClass.split(" ")))}l("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const a=e.params.pagination;let{el:t}=e.pagination;t=D(t),t.forEach(s=>{s.classList.remove(a.horizontalClass,a.verticalClass),s.classList.add(e.isHorizontal()?a.horizontalClass:a.verticalClass)})}),l("init",()=>{e.params.pagination.enabled===!1?E():($(),N(),S())}),l("activeIndexChange",()=>{typeof e.snapIndex>"u"&&S()}),l("snapIndexChange",()=>{S()}),l("snapGridLengthChange",()=>{N(),S()}),l("destroy",()=>{I()}),l("enable disable",()=>{let{el:a}=e.pagination;a&&(a=D(a),a.forEach(t=>t.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),l("lock unlock",()=>{S()}),l("click",(a,t)=>{const s=t.target,o=D(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&o&&o.length>0&&!s.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&s===e.navigation.nextEl||e.navigation.prevEl&&s===e.navigation.prevEl))return;const m=o[0].classList.contains(e.params.pagination.hiddenClass);r(m===!0?"paginationShow":"paginationHide"),o.forEach(j=>j.classList.toggle(e.params.pagination.hiddenClass))}});const O=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:a}=e.pagination;a&&(a=D(a),a.forEach(t=>t.classList.remove(e.params.pagination.paginationDisabledClass))),$(),N(),S()},E=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:a}=e.pagination;a&&(a=D(a),a.forEach(t=>t.classList.add(e.params.pagination.paginationDisabledClass))),I()};Object.assign(e.pagination,{enable:O,disable:E,render:N,update:S,init:$,destroy:I})}function oe(d){let{swiper:e,extendParams:g,on:l,emit:r,params:i}=d;e.autoplay={running:!1,paused:!1,timeLeft:0},g({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let u,y,B=i&&i.autoplay?i.autoplay.delay:3e3,x=i&&i.autoplay?i.autoplay.delay:3e3,L,A=new Date().getTime(),S,N,$,I,O,E,a;function t(p){!e||e.destroyed||!e.wrapperEl||p.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",t),!(a||p.detail&&p.detail.bySwiperTouchMove)&&h())}const s=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?S=!0:S&&(x=L,S=!1);const p=e.autoplay.paused?L:A+x-new Date().getTime();e.autoplay.timeLeft=p,r("autoplayTimeLeft",p,p/B),y=requestAnimationFrame(()=>{s()})},o=()=>{let p;return e.virtual&&e.params.virtual.enabled?p=e.slides.find(w=>w.classList.contains("swiper-slide-active")):p=e.slides[e.activeIndex],p?parseInt(p.getAttribute("data-swiper-autoplay"),10):void 0},m=p=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(y),s();let M=typeof p>"u"?e.params.autoplay.delay:p;B=e.params.autoplay.delay,x=e.params.autoplay.delay;const w=o();!Number.isNaN(w)&&w>0&&typeof p>"u"&&(M=w,B=w,x=w),L=M;const z=e.params.speed,q=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(z,!0,!0),r("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,z,!0,!0),r("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(z,!0,!0),r("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,z,!0,!0),r("autoplay")),e.params.cssMode&&(A=new Date().getTime(),requestAnimationFrame(()=>{m()})))};return M>0?(clearTimeout(u),u=setTimeout(()=>{q()},M)):requestAnimationFrame(()=>{q()}),M},j=()=>{A=new Date().getTime(),e.autoplay.running=!0,m(),r("autoplayStart")},k=()=>{e.autoplay.running=!1,clearTimeout(u),cancelAnimationFrame(y),r("autoplayStop")},c=(p,M)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(u),p||(E=!0);const w=()=>{r("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",t):h()};if(e.autoplay.paused=!0,M){O&&(L=e.params.autoplay.delay),O=!1,w();return}L=(L||e.params.autoplay.delay)-(new Date().getTime()-A),!(e.isEnd&&L<0&&!e.params.loop)&&(L<0&&(L=0),w())},h=()=>{e.isEnd&&L<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(A=new Date().getTime(),E?(E=!1,m(L)):m(),e.autoplay.paused=!1,r("autoplayResume"))},b=()=>{if(e.destroyed||!e.autoplay.running)return;const p=H();p.visibilityState==="hidden"&&(E=!0,c(!0)),p.visibilityState==="visible"&&h()},P=p=>{p.pointerType==="mouse"&&(E=!0,a=!0,!(e.animating||e.autoplay.paused)&&c(!0))},f=p=>{p.pointerType==="mouse"&&(a=!1,e.autoplay.paused&&h())},v=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",P),e.el.addEventListener("pointerleave",f))},C=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",P),e.el.removeEventListener("pointerleave",f))},_=()=>{H().addEventListener("visibilitychange",b)},J=()=>{H().removeEventListener("visibilitychange",b)};l("init",()=>{e.params.autoplay.enabled&&(v(),_(),j())}),l("destroy",()=>{C(),J(),e.autoplay.running&&k()}),l("_freeModeStaticRelease",()=>{($||E)&&h()}),l("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?k():c(!0,!0)}),l("beforeTransitionStart",(p,M,w)=>{e.destroyed||!e.autoplay.running||(w||!e.params.autoplay.disableOnInteraction?c(!0,!0):k())}),l("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){k();return}N=!0,$=!1,E=!1,I=setTimeout(()=>{E=!0,$=!0,c(!0)},200)}}),l("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!N)){if(clearTimeout(I),clearTimeout(u),e.params.autoplay.disableOnInteraction){$=!1,N=!1;return}$&&e.params.cssMode&&h(),$=!1,N=!1}}),l("slideChange",()=>{e.destroyed||!e.autoplay.running||(O=!0)}),Object.assign(e.autoplay,{start:j,stop:k,pause:c,resume:h})}const ce=async(d="ru")=>{var e;try{const l=(await Y.get("theme/customizations")).data.data.find(u=>u.type==="image_carousel");if(!l)return[];const r=l.translations.find(u=>u.locale===d);return(((e=r==null?void 0:r.options)==null?void 0:e.images)||l.options.images).map(u=>({...u,image:`https://shop.milliybiz.uz/${u.image}`}))}catch(g){return console.error("Carousel error:",g),[]}},pe=(d="ru")=>{const[e,g]=T.useState([]),[l,r]=T.useState(!0);return T.useEffect(()=>{r(!0),ce(d).then(i=>g(i)).finally(()=>r(!1))},[d]),{images:e,loading:l}},ue=()=>n.jsx("div",{className:"container",children:n.jsxs("div",{className:"banner-skeleton",children:[n.jsx("div",{className:"banner-skeleton__title"}),n.jsx("div",{className:"banner-skeleton__text"}),n.jsx("div",{className:"banner-skeleton__button"})]})});function X({lang:d="ru"}){const{images:e,loading:g}=pe(d),[l,r]=T.useState(!0);return T.useEffect(()=>{if(!g){const i=setTimeout(()=>{r(!1)},800);return()=>clearTimeout(i)}},[g]),l?n.jsx(ue,{}):n.jsx("div",{className:"container",children:n.jsx(te,{modules:[oe,re],slidesPerView:1,autoplay:{delay:1e3,disableOnInteraction:!1},loop:!0,pagination:{clickable:!0},className:"slide",children:e.map((i,u)=>n.jsx(se,{children:n.jsx("a",{href:"/products",className:"block h-full",children:n.jsx("img",{src:i.image,alt:i.title,className:"w-full h-full object-cover"})})},u))})})}function de(){var l;const{categories:d}=K(),{t:e,i18n:g}=U();return n.jsxs("div",{className:"categories",children:[n.jsx("div",{className:"container",children:n.jsxs("div",{className:"categories__top",children:[n.jsxs("h2",{className:"categories__title",children:[e("categ"),"."]}),n.jsxs("div",{className:"categories__txt",children:[n.jsx(R,{to:"/products",className:"link",children:n.jsxs("p",{className:"categories__text",children:[e("all")," "]})}),n.jsx("img",{src:ie,alt:"arrow-icon"})]})]})}),n.jsx("div",{className:"container",children:n.jsx("div",{className:"categories__wrap",children:(l=d==null?void 0:d.slice(0,4))==null?void 0:l.map(r=>{var u;const i=((u=r.translations)==null?void 0:u.find(y=>y.locale===g.language))||r;return n.jsx(R,{to:"/products",className:"card",children:n.jsx("div",{className:"card__wrap",children:n.jsxs("div",{className:"card__desc",children:[n.jsx("h3",{className:"card__desc-title",children:i.name}),n.jsx("p",{children:i.slug})]})})},r.id)})})})]})}const fe=(d={})=>Y.get("/news/",{params:d}),me=()=>{const[d,e]=T.useState([]),[g,l]=T.useState(!1),[r,i]=T.useState(null),u=T.useMemo(()=>ne(),[W.language]);return T.useEffect(()=>{let y=!0;return(async()=>{l(!0),i(null);try{const x=await fe(u);if(!y)return;e(x.data.results??x.data)}catch{if(!y)return;i("News yuklanmadi")}finally{y&&l(!1)}})(),()=>{y=!1}},[u]),{news:d,loading:g,error:r}};function ve(){const[d,e]=T.useState(""),{t:g,i18n:l}=U(),{news:r}=me();return n.jsxs(n.Fragment,{children:[n.jsx(le,{searchQuery:d}),n.jsx(X,{lang:"ru"}),n.jsx(de,{}),n.jsx(V,{title:g("allProds")}),n.jsx(X,{info:r,type:"second"}),n.jsx(V,{title:g("specialOffer")})]})}export{ve as default};
