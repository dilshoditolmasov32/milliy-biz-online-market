import{r as S,j as i,a as H,a0 as Z,a1 as q,b as R,a2 as $,a3 as z}from"./index-B41o97T_.js";import{m as E,c as F,g as G,i as Y,h as U,n as P,j as _,S as L,d as D,P as W}from"./Products-DWTz_rVA.js";import{N as X}from"./Nav-Bfp2WwnM.js";import"./ProductCard-BeBWYU3Q.js";function B(x){let{swiper:e,extendParams:v,on:h,emit:g}=x;v({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function m(t){let n;return t&&typeof t=="string"&&e.isElement&&(n=e.el.querySelector(t)||e.hostEl.querySelector(t),n)?n:(t&&(typeof t=="string"&&(n=[...document.querySelectorAll(t)]),e.params.uniqueNavElements&&typeof t=="string"&&n&&n.length>1&&e.el.querySelectorAll(t).length===1?n=e.el.querySelector(t):n&&n.length===1&&(n=n[0])),t&&!n?t:n)}function T(t,n){const r=e.params.navigation;t=E(t),t.forEach(a=>{a&&(a.classList[n?"add":"remove"](...r.disabledClass.split(" ")),a.tagName==="BUTTON"&&(a.disabled=n),e.params.watchOverflow&&e.enabled&&a.classList[e.isLocked?"add":"remove"](r.lockClass))})}function b(){const{nextEl:t,prevEl:n}=e.navigation;if(e.params.loop){T(n,!1),T(t,!1);return}T(n,e.isBeginning&&!e.params.rewind),T(t,e.isEnd&&!e.params.rewind)}function f(t){t.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),g("navigationPrev"))}function l(t){t.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),g("navigationNext"))}function s(){const t=e.params.navigation;if(e.params.navigation=F(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(t.nextEl||t.prevEl))return;let n=m(t.nextEl),r=m(t.prevEl);Object.assign(e.navigation,{nextEl:n,prevEl:r}),n=E(n),r=E(r);const a=(u,o)=>{u&&u.addEventListener("click",o==="next"?l:f),!e.enabled&&u&&u.classList.add(...t.lockClass.split(" "))};n.forEach(u=>a(u,"next")),r.forEach(u=>a(u,"prev"))}function c(){let{nextEl:t,prevEl:n}=e.navigation;t=E(t),n=E(n);const r=(a,u)=>{a.removeEventListener("click",u==="next"?l:f),a.classList.remove(...e.params.navigation.disabledClass.split(" "))};t.forEach(a=>r(a,"next")),n.forEach(a=>r(a,"prev"))}h("init",()=>{e.params.navigation.enabled===!1?d():(s(),b())}),h("toEdge fromEdge lock unlock",()=>{b()}),h("destroy",()=>{c()}),h("enable disable",()=>{let{nextEl:t,prevEl:n}=e.navigation;if(t=E(t),n=E(n),e.enabled){b();return}[...t,...n].filter(r=>!!r).forEach(r=>r.classList.add(e.params.navigation.lockClass))}),h("click",(t,n)=>{let{nextEl:r,prevEl:a}=e.navigation;r=E(r),a=E(a);const u=n.target;let o=a.includes(u)||r.includes(u);if(e.isElement&&!o){const w=n.path||n.composedPath&&n.composedPath();w&&(o=w.find(j=>r.includes(j)||a.includes(j)))}if(e.params.navigation.hideOnClick&&!o){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===u||e.pagination.el.contains(u)))return;let w;r.length?w=r[0].classList.contains(e.params.navigation.hiddenClass):a.length&&(w=a[0].classList.contains(e.params.navigation.hiddenClass)),g(w===!0?"navigationShow":"navigationHide"),[...r,...a].filter(j=>!!j).forEach(j=>j.classList.toggle(e.params.navigation.hiddenClass))}});const p=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),s(),b()},d=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),c()};Object.assign(e.navigation,{enable:p,disable:d,update:b,init:s,destroy:c})}function V(x){let{swiper:e,extendParams:v,on:h}=x;v({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let g=!1,m=!1;e.thumbs={swiper:null};function T(){const l=e.thumbs.swiper;if(!l||l.destroyed)return;const s=l.clickedIndex,c=l.clickedSlide;if(c&&c.classList.contains(e.params.thumbs.slideThumbActiveClass)||typeof s>"u"||s===null)return;let p;l.params.loop?p=parseInt(l.clickedSlide.getAttribute("data-swiper-slide-index"),10):p=s,e.params.loop?e.slideToLoop(p):e.slideTo(p)}function b(){const{thumbs:l}=e.params;if(g)return!1;g=!0;const s=e.constructor;if(l.swiper instanceof s){if(l.swiper.destroyed)return g=!1,!1;e.thumbs.swiper=l.swiper,Object.assign(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper.update()}else if(Y(l.swiper)){const c=Object.assign({},l.swiper);Object.assign(c,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper=new s(c),m=!0}return e.thumbs.swiper.el.classList.add(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",T),!0}function f(l){const s=e.thumbs.swiper;if(!s||s.destroyed)return;const c=s.params.slidesPerView==="auto"?s.slidesPerViewDynamic():s.params.slidesPerView;let p=1;const d=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(p=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(p=1),p=Math.floor(p),s.slides.forEach(r=>r.classList.remove(d)),s.params.loop||s.params.virtual&&s.params.virtual.enabled)for(let r=0;r<p;r+=1)U(s.slidesEl,`[data-swiper-slide-index="${e.realIndex+r}"]`).forEach(a=>{a.classList.add(d)});else for(let r=0;r<p;r+=1)s.slides[e.realIndex+r]&&s.slides[e.realIndex+r].classList.add(d);const t=e.params.thumbs.autoScrollOffset,n=t&&!s.params.loop;if(e.realIndex!==s.realIndex||n){const r=s.activeIndex;let a,u;if(s.params.loop){const o=s.slides.find(w=>w.getAttribute("data-swiper-slide-index")===`${e.realIndex}`);a=s.slides.indexOf(o),u=e.activeIndex>e.previousIndex?"next":"prev"}else a=e.realIndex,u=a>e.previousIndex?"next":"prev";n&&(a+=u==="next"?t:-1*t),s.visibleSlidesIndexes&&s.visibleSlidesIndexes.indexOf(a)<0&&(s.params.centeredSlides?a>r?a=a-Math.floor(c/2)+1:a=a+Math.floor(c/2)-1:a>r&&s.params.slidesPerGroup,s.slideTo(a,l?0:void 0))}}h("beforeInit",()=>{const{thumbs:l}=e.params;if(!(!l||!l.swiper))if(typeof l.swiper=="string"||l.swiper instanceof HTMLElement){const s=G(),c=()=>{const d=typeof l.swiper=="string"?s.querySelector(l.swiper):l.swiper;if(d&&d.swiper)l.swiper=d.swiper,b(),f(!0);else if(d){const t=`${e.params.eventsPrefix}init`,n=r=>{l.swiper=r.detail[0],d.removeEventListener(t,n),b(),f(!0),l.swiper.update(),e.update()};d.addEventListener(t,n)}return d},p=()=>{if(e.destroyed)return;c()||requestAnimationFrame(p)};requestAnimationFrame(p)}else b(),f(!0)}),h("slideChange update resize observerUpdate",()=>{f()}),h("setTransition",(l,s)=>{const c=e.thumbs.swiper;!c||c.destroyed||c.setTransition(s)}),h("beforeDestroy",()=>{const l=e.thumbs.swiper;!l||l.destroyed||m&&l.destroy()}),Object.assign(e.thumbs,{init:b,update:f})}function A(x){let{swiper:e,extendParams:v,emit:h,once:g}=x;v({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function m(){if(e.params.cssMode)return;const f=e.getTranslate();e.setTranslate(f),e.setTransition(0),e.touchEventsData.velocities.length=0,e.freeMode.onTouchEnd({currentPos:e.rtl?e.translate:-e.translate})}function T(){if(e.params.cssMode)return;const{touchEventsData:f,touches:l}=e;f.velocities.length===0&&f.velocities.push({position:l[e.isHorizontal()?"startX":"startY"],time:f.touchStartTime}),f.velocities.push({position:l[e.isHorizontal()?"currentX":"currentY"],time:P()})}function b(f){let{currentPos:l}=f;if(e.params.cssMode)return;const{params:s,wrapperEl:c,rtlTranslate:p,snapGrid:d,touchEventsData:t}=e,r=P()-t.touchStartTime;if(l<-e.minTranslate()){e.slideTo(e.activeIndex);return}if(l>-e.maxTranslate()){e.slides.length<d.length?e.slideTo(d.length-1):e.slideTo(e.slides.length-1);return}if(s.freeMode.momentum){if(t.velocities.length>1){const C=t.velocities.pop(),y=t.velocities.pop(),O=C.position-y.position,I=C.time-y.time;e.velocity=O/I,e.velocity/=2,Math.abs(e.velocity)<s.freeMode.minimumVelocity&&(e.velocity=0),(I>150||P()-C.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=s.freeMode.momentumVelocityRatio,t.velocities.length=0;let a=1e3*s.freeMode.momentumRatio;const u=e.velocity*a;let o=e.translate+u;p&&(o=-o);let w=!1,j;const M=Math.abs(e.velocity)*20*s.freeMode.momentumBounceRatio;let k;if(o<e.maxTranslate())s.freeMode.momentumBounce?(o+e.maxTranslate()<-M&&(o=e.maxTranslate()-M),j=e.maxTranslate(),w=!0,t.allowMomentumBounce=!0):o=e.maxTranslate(),s.loop&&s.centeredSlides&&(k=!0);else if(o>e.minTranslate())s.freeMode.momentumBounce?(o-e.minTranslate()>M&&(o=e.minTranslate()+M),j=e.minTranslate(),w=!0,t.allowMomentumBounce=!0):o=e.minTranslate(),s.loop&&s.centeredSlides&&(k=!0);else if(s.freeMode.sticky){let C;for(let y=0;y<d.length;y+=1)if(d[y]>-o){C=y;break}Math.abs(d[C]-o)<Math.abs(d[C-1]-o)||e.swipeDirection==="next"?o=d[C]:o=d[C-1],o=-o}if(k&&g("transitionEnd",()=>{e.loopFix()}),e.velocity!==0){if(p?a=Math.abs((-o-e.translate)/e.velocity):a=Math.abs((o-e.translate)/e.velocity),s.freeMode.sticky){const C=Math.abs((p?-o:o)-e.translate),y=e.slidesSizesGrid[e.activeIndex];C<y?a=s.speed:C<2*y?a=s.speed*1.5:a=s.speed*2.5}}else if(s.freeMode.sticky){e.slideToClosest();return}s.freeMode.momentumBounce&&w?(e.updateProgress(j),e.setTransition(a),e.setTranslate(o),e.transitionStart(!0,e.swipeDirection),e.animating=!0,_(c,()=>{!e||e.destroyed||!t.allowMomentumBounce||(h("momentumBounce"),e.setTransition(s.speed),setTimeout(()=>{e.setTranslate(j),_(c,()=>{!e||e.destroyed||e.transitionEnd()})},0))})):e.velocity?(h("_freeModeNoMomentumRelease"),e.updateProgress(o),e.setTransition(a),e.setTranslate(o),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,_(c,()=>{!e||e.destroyed||e.transitionEnd()}))):e.updateProgress(o),e.updateActiveIndex(),e.updateSlidesClasses()}else if(s.freeMode.sticky){e.slideToClosest();return}else s.freeMode&&h("_freeModeNoMomentumRelease");(!s.freeMode.momentum||r>=s.longSwipesMs)&&(h("_freeModeStaticRelease"),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}Object.assign(e,{freeMode:{onTouchStart:m,onTouchMove:T,onTouchEnd:b}})}const N="/assets/defaultImg-CQ2JjYC5.svg";function J({info:x=[],onSelect:e}){const[v,h]=S.useState(null);return i.jsxs("div",{className:"slider-container",children:[i.jsx("div",{className:"main-swiper-wrapper",children:i.jsx(L,{className:"mySwiper2",loop:!0,spaceBetween:10,navigation:!0,thumbs:{swiper:v},modules:[A,B,V],children:x.map((g,m)=>i.jsx(D,{loop:!0,spaceBetween:10,slidesPerView:4,freeMode:!0,watchSlidesProgress:!0,modules:[A,B,V],children:i.jsx("img",{src:g.original_image_url||`${N}`,alt:`slide-${m}`,style:{cursor:"pointer"},onClick:()=>e&&e(g)})},m))})}),i.jsx("div",{className:"thumbs-swiper-wrapper",children:i.jsx(L,{slidesPerView:4,spaceBetween:10,className:"mySwiper",children:x==null?void 0:x.map((g,m)=>i.jsx(D,{children:i.jsx("img",{src:g.medium_image_url||N,alt:`thumb-${m}`})},m))})})]})}const Q="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M19.1321%204.71626C19.1085%204.5121%2018.9829%204.32758%2018.7905%204.23728L9.81924%200.0559458C9.65825%20-0.0186486%209.47374%20-0.0186486%209.31275%200.0559458L0.3455%204.2412C0.153119%204.33151%200.0274825%204.5121%200.00392572%204.72019C0.00392572%204.72412%200%204.78301%200%204.78301V14.9478C0%2015.1912%200.149193%2015.411%200.376908%2015.5013L9.3481%2019.0898C9.41879%2019.1173%209.49342%2019.1331%209.5719%2019.1331C9.65046%2019.1331%209.72107%2019.1173%209.7957%2019.0898L18.7669%2015.5013C18.9946%2015.411%2019.1438%2015.1912%2019.1438%2014.9478V4.78301C19.136%204.77908%2019.1321%204.72019%2019.1321%204.71626ZM9.56796%201.14741C12.1357%202.34488%2014.7034%203.54235%2017.2711%204.73982C16.2581%205.15599%2015.2491%205.57217%2014.2362%205.98833C11.6096%204.87331%208.98694%203.75829%206.36033%202.64327C7.42824%202.14465%208.50006%201.64603%209.56796%201.14741ZM5.03331%203.25967C7.61277%204.35506%2010.1922%205.44653%2012.7717%206.54192C11.7038%206.97379%2010.6359%207.40567%209.56796%207.83752C6.99244%206.8089%204.4169%205.78024%201.84136%204.7516C2.90534%204.2569%203.96932%203.75829%205.03331%203.25967ZM1.08361%205.61535L8.9634%208.76807V17.7628L1.08361%2014.6102V5.61535ZM10.1726%2017.7628V8.76413L18.0523%205.61142V14.6062L10.1726%2017.7628Z'%20fill='%237D7D7D'/%3e%3c/svg%3e",K="data:image/svg+xml,%3csvg%20width='17'%20height='20'%20viewBox='0%200%2017%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M16.4648%205.18479C16.4547%204.65508%2016.4451%204.15468%2016.4451%203.67057C16.4451%203.2913%2016.1377%202.98383%2015.7584%202.98383C12.8214%202.98383%2010.5852%202.13977%208.72136%200.32751C8.45471%200.0681898%208.03039%200.0682878%207.76382%200.32751C5.90013%202.13977%203.66437%202.98383%200.727588%202.98383C0.348329%202.98383%200.0408504%203.2913%200.0408504%203.67057C0.0408504%204.15476%200.0313259%204.65536%200.0211682%205.18515C-0.0729623%2010.1147%20-0.201891%2016.8659%208.01763%2019.715C8.09058%2019.7402%208.16656%2019.7529%208.24255%2019.7529C8.31853%2019.7529%208.39469%2019.7402%208.46746%2019.715C16.6876%2016.8658%2016.5589%2010.1144%2016.4648%205.18479ZM8.24264%2018.3373C1.19329%2015.7765%201.29988%2010.1667%201.39447%205.21134C1.40014%204.91394%201.40563%204.62568%201.40948%204.34311C4.16011%204.22701%206.35967%203.39349%208.24264%201.75318C10.1258%203.39349%2012.3258%204.2271%2015.0766%204.34311C15.0804%204.6256%2015.0859%204.91366%2015.0916%205.21088C15.1861%2010.1665%2015.2926%2015.7764%208.24264%2018.3373Z'%20fill='%237D7D7D'/%3e%3cpath%20d='M10.6083%207.55749L7.29374%2010.8719L5.87932%209.45751C5.61113%209.18935%205.17628%209.18935%204.90818%209.45751C4.63998%209.72577%204.63998%2010.1605%204.90818%2010.4287L6.80815%2012.3287C6.94219%2012.4627%207.11805%2012.5298%207.29374%2012.5298C7.46943%2012.5298%207.64529%2012.4627%207.77933%2012.3287L11.5793%208.52869C11.8477%208.26053%2011.8477%207.82568%2011.5794%207.55757C11.3113%207.28938%2010.8765%207.28929%2010.6083%207.55749Z'%20fill='%237D7D7D'/%3e%3c/svg%3e",ee="data:image/svg+xml,%3csvg%20width='20'%20height='19'%20viewBox='0%200%2020%2019'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M18.1708%204.26411H17.922V1.9128C17.922%200.931474%2017.1015%200.133057%2016.0928%200.133057H2.82553C1.36147%200.133057%200.154364%201.22261%200.015019%202.61204C-0.00626557%202.71022%200.00130991%201.8354%200.00130991%2015.3852C0.00130991%2016.9004%201.26822%2018.1331%202.82549%2018.1331H18.1708C19.1795%2018.1331%2020%2017.3347%2020%2016.3533V6.04384C20%205.06251%2019.1795%204.26411%2018.1708%204.26411ZM2.82553%201.35555H16.0928C16.4086%201.35555%2016.6655%201.60554%2016.6655%201.91283V4.26414H2.82553C1.98556%204.26414%201.29795%203.61804%201.25963%202.80985C1.29791%202.00161%201.98553%201.35555%202.82553%201.35555ZM18.1708%2016.9106H2.82553C1.96106%2016.9106%201.25778%2016.2263%201.25778%2015.3852V5.02332C1.7066%205.31583%202.24592%205.48656%202.82553%205.48656H18.1708C18.4866%205.48656%2018.7436%205.73654%2018.7436%206.04384V8.52184H14.016C12.4059%208.52184%2011.096%209.79623%2011.096%2011.3628C11.096%2012.9293%2012.4059%2014.2037%2014.016%2014.2037H18.7436V16.3533C18.7436%2016.6606%2018.4866%2016.9106%2018.1708%2016.9106ZM18.7436%2012.9813H14.016C13.0987%2012.9813%2012.3525%2012.2553%2012.3525%2011.3629C12.3525%2010.4704%2013.0986%209.74431%2014.016%209.74431H18.7436V12.9813Z'%20fill='%237D7D7D'/%3e%3c/svg%3e",se=x=>H.get(`/products/${x}`);function re(){const{id:x}=Z(),e=q(),{t:v}=R(),{user:h,openAuth:g}=S.useContext($),[m,T]=S.useState(null),[b,f]=S.useState(N),[l,s]=S.useState(!0),[c,p]=S.useState(null);S.useEffect(()=>{(async()=>{var a,u;try{const o=await se(x);T(o.data.data),(u=(a=o.data)==null?void 0:a.base_image)!=null&&u.large_image_url&&f(o.data.base_image.large_image_url)}catch{p("Ошибка загрузки продукта")}finally{s(!1)}})()},[x]);const d=()=>{z.success("Muvaqqiyatli amalga oshirildi")},t=()=>{e("/basket")};if(l)return i.jsx("div",{className:"product-page skeleton-page",children:i.jsxs("div",{className:"container",children:[i.jsx("div",{className:"skeleton-nav"}),i.jsxs("div",{className:"productId-page",children:[i.jsxs("div",{className:"sliderId-component",children:[i.jsx("div",{className:"skeleton-slider"}),i.jsxs("div",{className:"product-info",children:[i.jsx("div",{className:"skeleton-line title"}),i.jsx("div",{className:"skeleton-line text"}),i.jsx("div",{className:"skeleton-line text"}),i.jsx("div",{className:"skeleton-line text"})]})]}),i.jsxs("div",{className:"product-sidebar",children:[i.jsx("div",{className:"skeleton-box"}),i.jsx("div",{className:"skeleton-features"})]})]})]})});if(c)return i.jsx("p",{children:c});if(!m)return i.jsx("p",{children:"Продукт не найден"});const n={title:m.name,total:m.in_stock?1:0,discount:0};return i.jsx("div",{className:"product-page",children:i.jsxs("div",{className:"container",children:[i.jsx(X,{status:!1,info:n}),i.jsxs("div",{className:"productId-page",children:[i.jsxs("div",{className:"sliderId-component",children:[i.jsx(J,{info:m.images||[],onSelect:r=>f(r.original_image_url||N)}),i.jsxs("div",{className:"product-info",children:[i.jsxs("div",{className:"product-info__parameters",children:[i.jsx("p",{className:"product-info__parameters-title",children:v("parameters")}),i.jsx("div",{dangerouslySetInnerHTML:{__html:m.short_description||""}})]}),i.jsxs("div",{className:"product-info__details",children:[i.jsx("p",{className:"product-info__details-title",children:v("infoAbtProd")}),i.jsx("div",{dangerouslySetInnerHTML:{__html:m.description||""}})]})]})]}),i.jsxs("div",{className:"product-sidebar",children:[i.jsxs("div",{className:"purchase-box",children:[i.jsx("p",{className:"purchase-box__price",children:m.formatted_price}),i.jsxs("div",{className:"purchase-box__buttons",children:[i.jsx("button",{onClick:t,disabled:!m.in_stock,children:v("addToCart")}),h?i.jsx("button",{onClick:d,disabled:!m.in_stock,children:v("buyBtn")}):i.jsx("button",{onClick:g,disabled:!m.in_stock,children:v("buyBtn")})]})]}),i.jsxs("div",{className:"product-features",children:[i.jsxs("div",{className:"feature-item",children:[i.jsx("img",{src:Q,alt:"box"}),i.jsx("p",{className:"feature-item__text",children:v("receivingWays")})]}),i.jsxs("div",{className:"feature-item",children:[i.jsx("img",{src:ee,alt:"wallet"}),i.jsx("p",{className:"feature-item__text",children:v("paymentWays")})]}),i.jsxs("div",{className:"feature-item",children:[i.jsx("img",{src:K,alt:"shield"}),i.jsx("p",{className:"feature-item__text",children:v("guarantee")})]})]})]})]}),i.jsx(W,{title:v("newProds")})]})})}export{re as default};
